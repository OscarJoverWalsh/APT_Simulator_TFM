

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installing CALDERA &mdash; caldera  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting started" href="Getting-started.html" />
    <link rel="prev" title="Welcome to CALDERA’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/caldera-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Usage Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installing CALDERA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#recommended">Recommended</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#concise">Concise</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-by-step-explanation">Step-by-step Explanation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#docker-deployment">Docker Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#offline-installation">Offline Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="Learning-the-terminology.html">Learning the terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="Basic-Usage.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="Server-Configuration.html">Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Plugin-library.html">Plugin library</a></li>
<li class="toctree-l1"><a class="reference internal" href="Parsers.html">Parsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Relationships.html">Relationships</a></li>
<li class="toctree-l1"><a class="reference internal" href="Requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="Objectives.html">Objectives</a></li>
<li class="toctree-l1"><a class="reference internal" href="Operation-Results.html">Operation Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="Initial-Access-Attacks.html">Initial Access Attacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lateral-Movement-Guide.html">Windows Lateral Movement Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="Dynamically-Compiled-Payloads.html">Dynamically-Compiled Payloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="Exfiltration.html">Exfiltration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sandcat-Peer-to-Peer.html">Peer-to-Peer Proxy Functionality for Sandcat Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="C2-Tunneling.html">C2 Communications Tunneling</a></li>
<li class="toctree-l1"><a class="reference internal" href="Uninstalling-CALDERA.html">Uninstall CALDERA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plugin Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="plugins/sandcat/Sandcat-Details.html">Sandcat Plugin Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/stockpile/Exfiltration-How-Tos.html">Exfiltration Scenarios and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/stockpile/Exfiltration-How-Tos.html#an-example">An Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/stockpile/Exfiltration-How-Tos.html#wrap-up">Wrap-up</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="The-REST-API.html">The REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="How-to-Build-Plugins.html">How to Build Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="How-to-Build-Planners.html">How to Build Planners</a></li>
<li class="toctree-l1"><a class="reference internal" href="How-to-Build-Agents.html">How to Build Agents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core System API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="_generated/modules.html">app</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">caldera</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installing CALDERA</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Installing-CALDERA.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installing-caldera">
<h1>Installing CALDERA<a class="headerlink" href="#installing-caldera" title="Permalink to this heading">¶</a></h1>
<p>CALDERA can be installed in four commands using the <a class="reference internal" href="#concise"><span class="std std-doc">concise installation instructions</span></a> and, optionally, be installed and run using a <a class="reference internal" href="#docker-deployment"><span class="std std-doc">docker container</span></a>.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">¶</a></h2>
<p>CALDERA aims to support a wide range of target systems, the core requirements are listed below:</p>
<ul class="simple">
<li><p>Linux or MacOS operating system</p></li>
<li><p>Python 3.7, 3.8, or 3.9 (with pip3)</p></li>
<li><p>A modern browser (Google Chrome is recommended)</p></li>
<li><p>The packages listed in the <a class="reference external" href="https://github.com/mitre/caldera/blob/master/requirements.txt">requirements file</a></p></li>
</ul>
<div class="section" id="recommended">
<h3>Recommended<a class="headerlink" href="#recommended" title="Permalink to this heading">¶</a></h3>
<p>To set up a development environment for CALDERA, and to dynamically compile agents, the following is recommended:</p>
<ul class="simple">
<li><p>GoLang 1.17+ (for optimal agent functionality)</p></li>
<li><p>Hardware: 8GB+ RAM and 2+ CPUs</p></li>
<li><p>The packages listed in the <a class="reference external" href="https://github.com/mitre/caldera/blob/master/requirements-dev.txt">dev requirements file</a></p></li>
</ul>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<div class="section" id="concise">
<h3>Concise<a class="headerlink" href="#concise" title="Permalink to this heading">¶</a></h3>
<p>CALDERA can be installed quickly by executing the following 4 commands in your terminal.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/mitre/caldera.git<span class="w"> </span>--recursive
<span class="nb">cd</span><span class="w"> </span>caldera
pip3<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
python3<span class="w"> </span>server.py<span class="w"> </span>--insecure
</pre></div>
</div>
</div>
<div class="section" id="step-by-step-explanation">
<h3>Step-by-step Explanation<a class="headerlink" href="#step-by-step-explanation" title="Permalink to this heading">¶</a></h3>
<p>Start by cloning the CALDERA repository recursively, pulling all available plugins. It is recommended to pass the desired <a class="reference external" href="https://github.com/mitre/caldera/releases">version/release</a> (should be in x.x.x format). Cloning any non-release branch, including master, may result in bugs.</p>
<p>In general, the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> command takes the form:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/mitre/caldera.git<span class="w"> </span>--recursive<span class="w"> </span>--branch<span class="w"> </span>x.x.x
</pre></div>
</div>
<p>To install version 4.0.0, one would execute:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/mitre/caldera.git<span class="w"> </span>--recursive<span class="w"> </span>--branch<span class="w"> </span><span class="m">4</span>.0.0
</pre></div>
</div>
<p>Once the clone completes, we can jump in to the new <code class="docutils literal notranslate"><span class="pre">caldera</span></code> directory:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>caldera
</pre></div>
</div>
<p>Next, install the pip requirements:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>Finally, start the server (optionally with startup <a class="reference internal" href="Server-Configuration.html#startup-parameters"><span class="std std-doc">flags</span></a> for additional logging):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>server.py
</pre></div>
</div>
<p>Once started, log in to http://localhost:8888 with the <code class="docutils literal notranslate"><span class="pre">red</span></code> using the password found in the <code class="docutils literal notranslate"><span class="pre">conf/local.yml</span></code> file (this file will be generated on server start).</p>
<p>To learn how to use CALDERA, navigate to the Training plugin and complete the capture-the-flag style course.</p>
</div>
</div>
<div class="section" id="docker-deployment">
<h2>Docker Deployment<a class="headerlink" href="#docker-deployment" title="Permalink to this heading">¶</a></h2>
<p>CALDERA can be installed and run in a Docker container.</p>
<p>Start by cloning the CALDERA repository recursively, passing the desired version/release in x.x.x format:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/mitre/caldera.git<span class="w"> </span>--recursive<span class="w"> </span>--branch<span class="w"> </span>x.x.x
</pre></div>
</div>
<p>Next, build the docker image, changing the image tag as desired.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>caldera
docker<span class="w"> </span>build<span class="w"> </span>--build-arg<span class="w"> </span><span class="nv">WIN_BUILD</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>.<span class="w"> </span>-t<span class="w"> </span>caldera:server
</pre></div>
</div>
<p>Alternatively, you can use the <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> file by running:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>docker-compose<span class="w"> </span>build
</pre></div>
</div>
<p>Finally, run the docker CALDERA server, changing port forwarding as required.  More information on CALDERA’s configuration is <a class="reference internal" href="Server-Configuration.html#configuration-file"><span class="std std-doc">available here</span></a>.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">7010</span>:7010<span class="w"> </span>-p<span class="w"> </span><span class="m">7011</span>:7011/udp<span class="w"> </span>-p<span class="w"> </span><span class="m">7012</span>:7012<span class="w"> </span>-p<span class="w"> </span><span class="m">8888</span>:8888<span class="w"> </span>caldera:server
</pre></div>
</div>
<p>To gracefully terminate your docker container, do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find the container ID for your docker container running CALDERA</span>
<span class="n">docker</span> <span class="n">ps</span>

<span class="c1"># Send interrupt signal, e.g. &quot;docker kill --signal=SIGINT 5b9220dd9c0f&quot;</span>
<span class="n">docker</span> <span class="n">kill</span> <span class="o">--</span><span class="n">signal</span><span class="o">=</span><span class="n">SIGINT</span> <span class="p">[</span><span class="n">container</span> <span class="n">ID</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="offline-installation">
<h2>Offline Installation<a class="headerlink" href="#offline-installation" title="Permalink to this heading">¶</a></h2>
<p>It is possible to use pip to install CALDERA on a server without internet access. Dependencies will be downloaded to a machine with internet access, then copied to the offline server and installed.</p>
<p>To minimize issues with this approach, the internet machine’s platform and Python version should match the offline server. For example, if the offline server runs Python 3.8 on Ubuntu 20.04, then the machine with internet access should run Python 3.8 and Ubuntu 20.04.</p>
<p>Run the following commands on the machine with internet access. These commands will clone the CALDERA repository recursively (passing the desired version/release in x.x.x format) and download the dependencies using pip:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/mitre/caldera.git<span class="w"> </span>--recursive<span class="w"> </span>--branch<span class="w"> </span>x.x.x
mkdir<span class="w"> </span>caldera/python_deps
pip3<span class="w"> </span>download<span class="w"> </span>-r<span class="w"> </span>caldera/requirements.txt<span class="w"> </span>--dest<span class="w"> </span>caldera/python_deps
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">caldera</span></code> directory now needs to be copied to the offline server (via <code class="docutils literal notranslate"><span class="pre">scp</span></code>, sneakernet, etc).</p>
<p>On the offline server, the dependencies can then be installed with <code class="docutils literal notranslate"><span class="pre">pip3</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip3<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>caldera/requirements.txt<span class="w"> </span>--no-index<span class="w"> </span>--find-links<span class="w"> </span>caldera/python_deps
</pre></div>
</div>
<p>CALDERA can then be started as usual on the offline server:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>caldera
python3<span class="w"> </span>server.py
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Getting-started.html" class="btn btn-neutral float-right" title="Getting started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to CALDERA’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2023, The MITRE Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>